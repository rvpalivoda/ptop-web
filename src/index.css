@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. */
/* 1) Базовые стили для ВСЕХ select */
@layer base {
    :where(select) {
        @apply bg-gray-900 text-white ring-1 ring-white/10 rounded-xl;
        color-scheme: dark; /* Подсказывает системе рисовать тёмное нативное меню */
    }

    /* 2) Стили опций в выпадающем списке */
    :where(select) > :where(option) {
        background-color: #111827; /* gray-900 */
        color: #ffffff;
    }

    /* 3) Состояния и доступность */
    :where(select:disabled) {
        @apply opacity-60 cursor-not-allowed;
    }
    :where(select:focus) {
        @apply outline-none ring-2 ring-white/20;
    }
}

/* (Опционально) более высокая специфичность для «упрямых» браузеров */
select option {
    background-color: #111827;
    color: #ffffff;
}

/* Стилизация скролла только в списке сообщений чата */
.chat-scrollbar {
    /* сохраняет место под скроллбар, чтобы не дёргалась разметка */
    scrollbar-gutter: stable both-edges;
    /* Firefox */
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.25) transparent;
}
.chat-scrollbar::-webkit-scrollbar {
    width: 10px;
}
@media (max-width: 640px) {
    .chat-scrollbar::-webkit-scrollbar { width: 8px; }
}
.chat-scrollbar::-webkit-scrollbar-track {
    background: transparent;
}
.chat-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.18);
    border-radius: 9999px;
    border: 2px solid transparent; /* создаёт визуальную «тонкую» дорожку */
    background-clip: content-box;
}
.chat-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.26);
}

/* Стилизация скролла в модалке создания оффера */
.modal-scrollbar {
    /* резервируем место только под правый скроллбар */
    scrollbar-gutter: stable;
    /* Firefox */
    scrollbar-width: thin;
    scrollbar-color: rgba(148, 163, 184, 0.45) transparent; /* slate-400 на прозрачном фоне */
}
.modal-scrollbar::-webkit-scrollbar {
    width: 10px;
}
@media (max-width: 640px) {
    .modal-scrollbar::-webkit-scrollbar { width: 8px; }
}
.modal-scrollbar::-webkit-scrollbar-track {
    background: transparent;
}
.modal-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(148, 163, 184, 0.35); /* slate-400 */
    border-radius: 9999px;
    border: 2px solid transparent;
    background-clip: content-box;
}
.modal-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(148, 163, 184, 0.5);
}

/* Мобильные улучшения */
/* Без задержки 300ms и подсветки при тапе */
button, [role="button"], .tap-manipulation {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

/* Безопасная зона снизу для iOS (safe-area) */
.pb-safe {
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 16px);
}

/* Безопасная зона сверху для вырезов (notch) */
.pt-safe {
    padding-top: calc(env(safe-area-inset-top, 0px) + 8px);
}
